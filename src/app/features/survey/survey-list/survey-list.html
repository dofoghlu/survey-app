<div class="h-full flex flex-col pt-6">
  @if (isLoading) {
    <div class="flex-1 flex items-center justify-center">
      <div
        class="h-8 w-8 rounded-full border-2 border-gray-300 border-t-blue-600 animate-spin"
        aria-label="Loading surveys"
      ></div>
    </div>
  } @else {
    @if (surveys.length === 0) {
      <app-empty-state message="No surveys created yet.">
        <ng-container action *ngTemplateOutlet="createBtn"></ng-container>
      </app-empty-state>
    } @else {
      <div class="flex justify-end mb-4">
        <ng-container action *ngTemplateOutlet="createBtn"></ng-container>
      </div>

      <div class="flex flex-col gap-4 pb-6">
        @for (survey of surveys; track survey.id) {
          <app-survey-item [survey]="survey" (edit)="onEdit($event)" />
        }
      </div>
    }
  }
</div>

<ng-template #createBtn>
  <button
    class="text-button mb-2 flex items-center gap-2"
    [disabled]="isCreating"
    (click)="onCreate()"
  >
    <lucide-icon [img]="Plus" class="w-4 h-4"></lucide-icon>
    Create Survey

    @if (isCreating) {
      <span
        class="h-4 w-4 rounded-full border-2 border-gray-300 border-t-blue-600 animate-spin"
        aria-hidden="true"
      ></span>
    }
  </button>
</ng-template>
